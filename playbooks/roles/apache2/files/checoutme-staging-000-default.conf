<VirtualHost *:80>
    ServerName localhost
    <Location "/server-status">
    SetHandler server-status
    Require  host  localhost		#uncomment to only allow requests from localhost 
    </Location>
</VirtualHost>


# For production Server running via systemd service and apache-tomcat-7.0.65 folder in /data
<VirtualHost *:80>
#    Alias "/app" "/var/www/html/app"
    RemoteIPHeader X-Forwarded-For
        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"

       <Directory "/var/www/html/app">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Require all granted
        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
       </Directory>

    ServerName staging.checoutapi.innowi.com



#RewriteEngine On
#RewriteCond %{HTTPS} !on
#RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

#RewriteEngine On
#RewriteCond %{HTTP:X-Forwarded-Proto} =http
#RewriteRule .* https://%{HTTP:Host}%{REQUEST_URI} [L,R=permanent]

#RewriteEngine on 
#RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
#RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

#Redirect permanent / https://apis.innowi.com/

# For AWS ALB Health Check to Pass
RewriteEngine on
RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

#    ProxyPassMatch ^/app !
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8081/
    ProxyPassReverse / http://127.0.0.1:8081/
</VirtualHost>

######################
<VirtualHost *:80>
#    Alias "/app" "/var/www/html/app"
    RemoteIPHeader X-Forwarded-For

       <Directory "/var/www/html/app">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Require all granted
        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
       </Directory>
    ServerName staging.checout.innowi.com

# For AWS ALB Health Check to Pass
RewriteEngine on
RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

#    ProxyPassMatch ^/app !
#    ProxyPreserveHost On
#    ProxyPass / http://127.0.0.1:8081/
#    ProxyPassReverse / http://127.0.0.1:8081/
</VirtualHost>

#######################################
###### staging.timeclock.innowi.com
######################################
<VirtualHost *:80>
    RemoteIPHeader X-Forwarded-For
        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"


       <Directory "/var/www/html/app">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Require all granted
        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
       </Directory>
    ServerName staging.timeclock.innowi.com

# For AWS ALB Health Check to Pass
RewriteEngine on
RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

DocumentRoot /var/www/html/app

</VirtualHost>

#####################################
#   XXXXXXXXXXXXXXXXXXXXXXXXX staging.timeclockapi.innowi.com XXXXXXXXXXXXXXXXXXX
#####################################
#<VirtualHost *:80>
#    RemoteIPHeader X-Forwarded-For
#        Header set Access-Control-Allow-Origin "*"
#        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
#        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"

#       <Directory "/var/www/html/app">
#        Options Indexes FollowSymLinks MultiViews
#        AllowOverride None
#        Require all granted
#        Header set Access-Control-Allow-Origin "*"
#        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
#        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
#       </Directory>

#    ServerName staging.timeclockapi.innowi.com

## For AWS ALB Health Check to Pass
#RewriteEngine on
#RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
#RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

#    ProxyPreserveHost On
#    ProxyPass / http://127.0.0.1:8082/
#    ProxyPassReverse / http://127.0.0.1:8082/
#</VirtualHost>
