<IfModule mod_ssl.c>
#  Production build running as systemd service of tomcat7 folder in /data/apache-tomcat-7.0.65
	<VirtualHost *:443>
		ServerAdmin webmaster@localhost
                ServerName staging.checoutapi.innowi.com
#    Alias "/app" "/var/www/html/app"
    RemoteIPHeader X-Forwarded-For

        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"

# For AWS ALB Health Check to Pass
RewriteEngine on 
RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

       <Directory "/var/www/html/app">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Require all granted
        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
       </Directory>

#    ServerName apis.innowi.com

#    ProxyPassMatch ^/app !
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:8081/
    ProxyPassReverse / http://127.0.0.1:8081/
		#DocumentRoot /var/www/html
		ErrorLog ${APACHE_LOG_DIR}/error.log
		CustomLog ${APACHE_LOG_DIR}/access.log combined
		SSLEngine on
		SSLCertificateFile	/etc/ssl/certs/ssl-cert-snakeoil.pem
		SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

	</VirtualHost>







<VirtualHost *:443>
                ServerAdmin webmaster@localhost
                ServerName staging.checout.innowi.com
                RemoteIPHeader X-Forwarded-For


# For AWS ALB Health Check to Pass
RewriteEngine on
RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# If an existing asset or directory is requested go to it as it is
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d
RewriteRule ^ - [L]

# If the requested resource doesn't exist, use index.html
RewriteRule ^ /index.html
###############################################################
       <Directory "/var/www/html/app">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Require all granted
        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
       </Directory>

#    ProxyPreserveHost On
#    ProxyPass / http://127.0.0.1:81/
#    ProxyPassReverse / http://127.0.0.1:81/
                DocumentRoot /var/www/html/staging.checout
                ErrorLog ${APACHE_LOG_DIR}/error.log
                CustomLog ${APACHE_LOG_DIR}/access.log combined
                SSLEngine on
                SSLCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem
                SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

</VirtualHost>

########################################
#### test-angular.innowi.com
##########################################
<VirtualHost *:443>
   ServerAdmin webmaster@localhost
   ServerName test-angular.innowi.com
   RemoteIPHeader X-Forwarded-For


# For AWS ALB Health Check to Pass
RewriteEngine on
RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

       <Directory "/var/www/html/app">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Require all granted
        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
       </Directory>


      DocumentRoot /var/www/html/app
      ErrorLog ${APACHE_LOG_DIR}/error.log
      CustomLog ${APACHE_LOG_DIR}/access.log combined
      SSLEngine on
      SSLCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem
      SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

</VirtualHost>

###################################
# staging.timeclockapi.innowi.com
###################################
#<VirtualHost *:443>
#      ServerAdmin webmaster@localhost
#      ServerName staging.timeclockapi.innowi.com
#      RemoteIPHeader X-Forwarded-For

#      Header set Access-Control-Allow-Origin "*"
#      Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
#      Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"

## For AWS ALB Health Check to Pass
#RewriteEngine on
#RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
#RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

#       <Directory "/var/www/html/app">
#        Options Indexes FollowSymLinks MultiViews
#        AllowOverride None
#        Require all granted
#        Header set Access-Control-Allow-Origin "*"
#        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
#        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
#       </Directory>

#    ProxyPreserveHost On
#    ProxyPass / http://127.0.0.1:8082/
#    ProxyPassReverse / http://127.0.0.1:8082/
#                #DocumentRoot /var/www/html
#                ErrorLog ${APACHE_LOG_DIR}/error.log
#                CustomLog ${APACHE_LOG_DIR}/access.log combined
#                SSLEngine on
#                SSLCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem
#                SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

#</VirtualHost>

###
# staging.timeclock.innowi.com
        <VirtualHost *:443>
                ServerAdmin webmaster@localhost
                ServerName staging.timeclock.innowi.com
    RemoteIPHeader X-Forwarded-For


# For AWS ALB Health Check to Pass
RewriteEngine on
RewriteCond %{HTTP:X-Forwarded-Proto} ^http$
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

       <Directory "/var/www/html/app">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Require all granted
        Header set Access-Control-Allow-Origin "*"
        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"
       </Directory>


    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:82/
    ProxyPassReverse / http://127.0.0.1:82/
               # DocumentRoot /var/www/html/timeclock
                ErrorLog ${APACHE_LOG_DIR}/timeclock-error.log
                CustomLog ${APACHE_LOG_DIR}/timeclock-access.log combined
                SSLEngine on
                SSLCertificateFile      /etc/ssl/certs/ssl-cert-snakeoil.pem
                SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

        </VirtualHost>

###
</IfModule>
